<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>View PDF (Google Drive)</title>
  <style>
    html, body { height:100%; margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#f5f7fb; color:#222; }
    .container { display:flex; flex-direction:column; height:100%; }
    header {
      padding:10px 16px;
      background:white;
      border-bottom:1px solid #e6e9ef;
      display:flex;
      align-items:center;
      gap:12px;
      box-shadow: 0 1px 0 rgba(0,0,0,0.02);
    }
    header h1 { font-size:16px; margin:0; }
    .controls { margin-left:auto; display:flex; gap:8px; align-items:center; }
    .btn {
      padding:6px 10px;
      border-radius:8px;
      border:1px solid #ddd;
      background:white;
      cursor:pointer;
      font-size:13px;
    }
    .viewer { flex:1; display:block; height:calc(100% - 56px); }
    iframe { width:100%; height:100%; border:0; background:white; }
    .fallback {
      padding:20px;
      text-align:center;
      color:#555;
    }
    a.link { color:#0b66ff; text-decoration:none; }
    @media (max-width:520px) {
      header h1 { font-size:14px; }
      .btn { padding:6px 8px; font-size:12px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>PDF Viewer â€” Google Drive</h1>
      <div class="controls">
        <button class="btn" id="openNew">Open in new tab</button>
        <button class="btn" id="download">Download</button>
      </div>
    </header>

    <div class="viewer" id="viewer">
      <iframe id="pdfFrame" src="" title="PDF from Google Drive" allowfullscreen></iframe>
    </div>

    <div class="fallback" id="fallback" style="display:none;">
      <p>Unable to load the embedded PDF. You can <a id="directLink" class="link" href="#" target="_blank" rel="noopener">open it on Google Drive</a> instead.</p>
    </div>
  </div>

  <script>
    const fileId = "1P-IUg7jX-8qpQJu5BOClY0wVeZ5Uj9eO"; // your file ID
    const previewUrl = ""; // leave blank unless you want a custom URL
    const drivePreview = previewUrl || (fileId ? `https://drive.google.com/file/d/${fileId}/preview` : "");

    const iframe = document.getElementById('pdfFrame');
    const fallback = document.getElementById('fallback');
    const viewer = document.getElementById('viewer');
    const directLink = document.getElementById('directLink');
    const openNew = document.getElementById('openNew');
    const downloadBtn = document.getElementById('download');

    if (!drivePreview) {
      viewer.style.display = 'none';
      fallback.style.display = 'block';
      directLink.href = "#";
      directLink.textContent = "No file provided. Edit the HTML and add your Drive file ID.";
    } else {
      iframe.src = drivePreview;
      directLink.href = drivePreview;
      openNew.addEventListener('click', () => window.open(drivePreview, '_blank', 'noopener'));
      const viewUrl = drivePreview.replace('/preview', '/view');
      downloadBtn.addEventListener('click', () => window.open(viewUrl, '_blank', 'noopener'));
      iframe.addEventListener('error', () => {
        viewer.style.display = 'none';
        fallback.style.display = 'block';
      });
      setTimeout(() => {
        if (!iframe.src || (iframe.contentDocument && iframe.contentDocument.body.innerText.includes('Not Found'))) {
          viewer.style.display = 'none';
          fallback.style.display = 'block';
        }
      }, 2500);
    }
  </script>
</body>
</html>
